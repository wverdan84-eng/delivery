<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cat√°logo Zap</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/beercss@3.4.13/dist/cdn/beer.min.css">
</head>
<body class="light">
    <header class="primary shadow">
        <nav class="center-align"><h5 class="white-text">üõçÔ∏è Meu Cat√°logo</h5></nav>
    </header>

    <main class="responsive p-2" id="app">
        <div class="grid" id="lista"></div>
    </main>

    <script>
        const API_URL = "https://script.google.com/macros/s/AKfycbysE5Bi71WOorBpHrqTruFqsM6D6KQLyMNdx5HqAeK_0E6Q5DvWAYsIc-rJr7llpGpe/exec";

        async function carregar() {
            try {
                // O segredo est√° no 'mode: cors' e no redirecionamento
                const response = await fetch(API_URL);
                const produtos = await response.json();
                
                const lista = document.getElementById('lista');
                lista.innerHTML = produtos.map(p => `
                    <div class="s12 m6 l4">
                        <div class="card">
                            <img src="${p.img || 'https://via.placeholder.com/300x200?text=Sem+Foto'}" class="responsive" style="height:200px; object-fit:cover">
                            <div class="padding">
                                <h6>${p.nome}</h6>
                                <p class="green-text"><b>R$ ${parseFloat(p.preco).toFixed(2)}</b></p>
                                <button class="fill green full-width" onclick="alert('Pedido enviado!')">Pedir no Zap</button>
                            </div>
                        </div>
                    </div>
                `).join('');
            } catch (e) {
                console.error(e);
                document.getElementById('app').innerHTML = "<h5>Erro ao conectar com a planilha. Verifique se o Script est√° publicado como 'Qualquer Pessoa'.</h5>";
            }
        }
        window.onload = carregar;
    </script>
</body>
</html>
